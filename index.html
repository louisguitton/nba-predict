<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Nba-predict by louisguitton</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Nba-predict</h1>
      <h2 class="project-tagline">Predict NBA games winners with machine learning</h2>
      <a href="https://github.com/louisguitton/nba-predict" class="btn">View on GitHub</a>
      <a href="https://github.com/louisguitton/nba-predict/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/louisguitton/nba-predict/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="nba-game-winner-predicter" class="anchor" href="#nba-game-winner-predicter" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NBA game winner predicter</h1>

<h2>
<a id="python-crawler-to-generate-the-games-collection" class="anchor" href="#python-crawler-to-generate-the-games-collection" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Python Crawler to generate the Games Collection</h2>

<p>The data comes from <a href="http://www.oddsportal.com/basketball/usa">Odds Portal</a>
The Python crawler uses Scrapy
It connects to MongoDB locally or to mongolab (mongodb://:@ds051575.mlab.com:51575/nba-lgu)
It uses a rendering middleware Splash deployed on a Docker virtual machine</p>

<div class="highlight highlight-source-shell"><pre>mongod</pre></div>

<div class="highlight highlight-source-shell"><pre>docker run -p 8050:8050 scrapinghub/splash</pre></div>

<div class="highlight highlight-source-shell"><pre>scrapy crawl nba</pre></div>

<p>The Game schema of the resulting DB is described in crawler/nba_odds/itemps.py</p>

<h2>
<a id="extract-the-db-into-csv--generate-the-teams-collection" class="anchor" href="#extract-the-db-into-csv--generate-the-teams-collection" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Extract the DB into csv &amp; Generate the Teams Collection</h2>

<div class="highlight highlight-source-shell"><pre><span class="pl-c1">cd</span> data
sh mongo2csv.h
node generate_teams.js</pre></div>

<h2>
<a id="admin-the-dbs" class="anchor" href="#admin-the-dbs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Admin the DBs</h2>

<p>nba MONGODB: user=admin pwd=root
Admin UI admin:pass</p>

<div class="highlight highlight-source-shell"><pre>mongo-express -a</pre></div>

<h2>
<a id="preliminary-analysis-with-jupyter-notebooks" class="anchor" href="#preliminary-analysis-with-jupyter-notebooks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Preliminary Analysis with Jupyter Notebooks</h2>

<div class="highlight highlight-source-shell"><pre><span class="pl-c1">cd</span> analysis
ipython notebook</pre></div>

<p>Key findings:</p>

<ul>
<li>the odds are sometimes in the US or UK format</li>
<li>Winner and Looser scores are following gaussians</li>
<li>winner and looser odds are following a log-normal distribution</li>
<li>more interesting to use (home, away) rather than (winner, looser)</li>
<li>the simple classifier "lowest odds wins" as a 70% accuracy</li>
</ul>

<h2>
<a id="cleanup-and-feature-engineering" class="anchor" href="#cleanup-and-feature-engineering" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cleanup and Feature Engineering</h2>

<div class="highlight highlight-source-shell"><pre>node cleanup.js</pre></div>

<h2>
<a id="db-schemas" class="anchor" href="#db-schemas" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>DB Schemas</h2>

<h2>
<a id="game-collection" class="anchor" href="#game-collection" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Game Collection</h2>

<p>Home team
Away team
overtime
score home team
score away team
date and time
how many days of rest for home team
how many days of rest for away team
Pace = number of possessions per game
Efficiency = points / possessions</p>

<h2>
<a id="equipe-collection" class="anchor" href="#equipe-collection" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Equipe Collection</h2>

<p>conference
division
number of wins
number of losses
rank in conference
rank in division</p>

<ul>
<li>effective field goal percentage</li>
<li>Free throw attempt rate</li>
<li>turnover ratio</li>
<li>offensive rebound percentage</li>
</ul>

<h2>
<a id="ideas" class="anchor" href="#ideas" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Ideas</h2>

<p>There's a difference between the data you can get after the game (the 4 factors),
and the data you have before the game.
thanks to the stats after the game, you can update your ELO-based model.</p>

<p>pourquoi pas utiliser une chaine de markov pour prédire la prochaine win?
les etats sont les places au classement: on prend une équipe et on regarde quelles est la proba pour cette equipe de rester à ce classement ou bien de bouger</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/louisguitton/nba-predict">Nba-predict</a> is maintained by <a href="https://github.com/louisguitton">louisguitton</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
